bash test/test_task_api.sh 
====================================================
开始任务管理API测试
====================================================
基本URL: http://127.0.0.1:8080

----------------------------------------------------
1. 测试: 查询节点列表 (GET /api/task/node)
----------------------------------------------------
响应:
{
  "nodes": [
    {
      "ip": "172.17.0.2",
      "resources": "cpu_usage_percent:0,memory_usage_percent:21",
      "status": 0
    }
  ]
}

----------------------------------------------------
2. 测试: 创建任务组模板 (POST /api/task/task_group)
----------------------------------------------------
请求体:
{
  "name": "我的API测试任务",
  "task_groups": [
    {
      "tasks": [
        {
          "name": "测试任务1",
          "config": {
            "command": "/root/test.bin"
          }
        },
        {
          "name": "测试任务2",
          "config": {
            "command": "/root/test.bin"
          }
        },
        {
          "name": "测试任务3",
          "config": {
            "command": "/root/test.bin"
          }
        }
      ]
    }
  ]
}

响应:
{
  "status": "success"
}
HTTP Status Code: 200

----------------------------------------------------
3. 测试: 查询任务组模板 (POST /api/task/query)
----------------------------------------------------
请求体:
{
  "name": "我的API测试任务"
}

响应:
{
  "name": "我的API测试任务",
  "task_groups": [
    {
      "tasks": [
        {
          "config": {
            "command": "/root/test.bin"
          },
          "name": "测试任务1"
        },
        {
          "config": {
            "command": "/root/test.bin"
          },
          "name": "测试任务2"
        },
        {
          "config": {
            "command": "/root/test.bin"
          },
          "name": "测试任务3"
        }
      ]
    }
  ]
}

----------------------------------------------------
4. 测试: 部署任务组 (POST /api/task/task_group/deploy)
----------------------------------------------------
请求体:
{
  "name": "我的API测试任务"
}

响应:
{
  "id": "b827e17c-c235-430b-bf9e-89bc0fd3c2f5"
}
HTTP Status Code: 200
提取到的任务组实例ID: b827e17c-c235-430b-bf9e-89bc0fd3c2f5
等待5秒以便任务组部署...

----------------------------------------------------
5. 测试: 查询任务组状态 (POST /api/task/task_group/query)
----------------------------------------------------
请求体:
{
  "id": "b827e17c-c235-430b-bf9e-89bc0fd3c2f5"
}

响应:
{
  "id": "b827e17c-c235-430b-bf9e-89bc0fd3c2f5",
  "status": 0
}
等待5秒...

----------------------------------------------------
6. 测试: 停止任务组 (POST /api/task/task_group/stop)
----------------------------------------------------
请求体:
{
  "id": "b827e17c-c235-430b-bf9e-89bc0fd3c2f5"
}

响应:
{
  "id": "b827e17c-c235-430b-bf9e-89bc0fd3c2f5"
}

====================================================
API测试完成。
====================================================